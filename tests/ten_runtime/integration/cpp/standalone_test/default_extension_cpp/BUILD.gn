#
# Copyright Â© 2024 Agora
# This file is part of TEN Framework, an open source project.
# Licensed under the Apache License, Version 2.0, with certain conditions.
# Refer to the "LICENSE" file in the root directory for more information.
#
import("//build/feature/ten_package.gni")

ten_package("default_extension_cpp") {
  package_kind = "extension"
  enable_build = true

  resources = [
    "manifest.json",
    "property.json",
  ]

  sources = [ "src/main.cc" ]
  include_dirs = [ "//core/include" ]
}

executable("default_extension_cpp_test") {
  output_dir = "${root_out_dir}/tests"

  sources = [ "test/test.cc" ]

  public_deps = [
    "//third_party/googletest",
    "//third_party/googletest:gtest_main",
  ]

  include_dirs = [ ".ten/app/ten_packages/system/ten_runtime/include" ]

  lib_dirs = [ ".ten/app/ten_packages/system/ten_runtime/lib" ]
  libs = [
    "ten_runtime",
    "ten_utils",
  ]

  ldflags = [
    "-Wl,-rpath=\$ORIGIN",
    "-Wl,-rpath=\$ORIGIN/../lib/",
  ]
}
